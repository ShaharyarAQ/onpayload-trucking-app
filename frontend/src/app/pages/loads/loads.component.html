<div class="container-row content">
  <h2>Loads</h2>

  <div class="row">
    <div class="col-md-8 col-sm-4">
      <button type="button" class="btn btn-warning" style="color: black; font-weight:300;" (click)="addLoad()">Add
        Load</button>
    </div>
    <div class="col-md-4 col-sm-8 float-right">
      <input (keyup)="applyFilter($event.target.value)" type="text" class="form-control" placeholder="Search">
    </div>
  </div>
  <br />
  <div class="row">
    <div class="col-md-12">

      <mat-table [dataSource]="dataSource" matSort>

        <ng-container matColumnDef="date">
          <mat-header-cell *matHeaderCellDef mat-sort-header> Date </mat-header-cell>
          <mat-cell *matCellDef="let load"> {{load.date | date}} </mat-cell>
        </ng-container>

        <ng-container matColumnDef="client">
          <mat-header-cell *matHeaderCellDef mat-sort-header> Client </mat-header-cell>
          <mat-cell *matCellDef="let load"> {{load.client.firstName + ' ' + load.client.lastName}} </mat-cell>
        </ng-container>

        <ng-container matColumnDef="pickup">
          <mat-header-cell *matHeaderCellDef mat-sort-header> Pickup </mat-header-cell>
          <mat-cell *matCellDef="let load"> {{load.pickupCity}},&nbsp;{{load.pickupState}}&nbsp;{{load.pickupZipcode}}
          </mat-cell>
        </ng-container>

        <ng-container matColumnDef="destination">
          <mat-header-cell *matHeaderCellDef mat-sort-header> Destination </mat-header-cell>
          <mat-cell *matCellDef="let load">
            {{load.destinationCity}},&nbsp;{{load.destinationState}}&nbsp;{{load.destinationZipcode}} </mat-cell>
        </ng-container>

        <ng-container matColumnDef="milage">
          <mat-header-cell *matHeaderCellDef mat-sort-header> Milage </mat-header-cell>
          <mat-cell *matCellDef="let load"> {{load.distance}} </mat-cell>
        </ng-container>

        <ng-container matColumnDef="pay">
          <mat-header-cell *matHeaderCellDef mat-sort-header> Pay </mat-header-cell>
          <mat-cell *matCellDef="let load"> $ {{load.pay}} </mat-cell>
        </ng-container>

        <ng-container matColumnDef="RPM">
          <mat-header-cell *matHeaderCellDef mat-sort-header>RPM </mat-header-cell>
          <mat-cell *matCellDef="let load">$ {{(load.pay/load.distance).toFixed(2)}} </mat-cell>
        </ng-container>

        <ng-container matColumnDef="status">
          <mat-header-cell *matHeaderCellDef mat-sort-header> Status </mat-header-cell>
          <mat-cell *matCellDef="let load"> {{(load.status['current'])}} </mat-cell>
        </ng-container>

        <ng-container matColumnDef="actions">
          <mat-header-cell *matHeaderCellDef> Actions </mat-header-cell>
          <mat-cell *matCellDef="let load">
            <button *ngIf="load.status['current'] === 'Created' " type="button" rel="tooltip" class="btn btn-link btn-icon btn-sm">
              <i class=" tim-icons icon-triangle-right-17" (click)="startLoad(load.hashedId)"></i>
            </button>
            <button type="button" rel="tooltip" class="btn btn-link btn-icon btn-sm">
              <i class=" tim-icons icon-alert-circle-exc" (click)="loadInfo(load.id)"></i>
            </button>
            <button type="button" rel="tooltip" class="btn btn-link btn-icon btn-sm">
              <i class=" tim-icons icon-paper"></i>
            </button>
            <button  *ngIf="load.status['current'] === 'Created' "  type="button" rel="tooltip" class="btn btn-link btn-icon btn-sm">
              <i class=" tim-icons icon-pencil" (click)="updateLoad(load.id)"></i>
            </button>
            <button *ngIf="load.status['current'] === 'Created' " type="button" rel="tooltip" class="btn btn-link btn-icon btn-sm">
              <i class=" tim-icons icon-trash-simple" (click)="deleteDialog(load.id)"></i>
            </button>
          </mat-cell>
        </ng-container>

        <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
        <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>
      </mat-table>

      <mat-paginator [pageSizeOptions]="[5,10,20]" showFirstLastButtons></mat-paginator>
    </div>
  </div>
</div>